- name: Run backend application container
  docker_container:
    name: backend_app
    image: "gbrom/tp-devops-simple-api:latest"
    state: started
    restart_policy: unless-stopped
    networks:
      - name: db_network      # connects to database
      - name: app_network     # connects to proxy
    env:
      SPRING_DATASOURCE_URL: "jdbc:postgresql://{{ VAULT_DB_SERVER }}:5432/{{ VAULT_DB_NAME }}"
      SPRING_DATASOURCE_USERNAME: "{{ VAULT_DB_USERNAME }}"
      SPRING_DATASOURCE_PASSWORD: "{{ VAULT_DB_PASSWORD }}"
